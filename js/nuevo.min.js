import{createClient}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";const btnOpenDrawer=document.getElementById("btnOpenDrawer"),btnCloseDrawer=document.getElementById("btnCloseDrawer"),drawer=document.getElementById("drawer");btnOpenDrawer.addEventListener("click",()=>{drawer.classList.toggle("active")}),document.querySelectorAll("#drawer a").forEach(link=>{link.addEventListener("click",()=>{setTimeout(()=>{drawer.classList.toggle("active")},123)})}),btnCloseDrawer.addEventListener("click",()=>{drawer.classList.remove("active")});const supabaseUrl="https://lqznaoovmqsfipptlktu.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxxem5hb292bXFzZmlwcHRsa3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODkwMTQzMzksImV4cCI6MjAwNDU5MDMzOX0.CXn7Be_747VSWkg6JQ0LLm6AmQeCmSqRxrSRNatfoL0",supabase=createClient(supabaseUrl,supabaseKey),form=document.getElementById("messageForm"),nombreInput=document.getElementById("nombre"),mensajeInput=document.getElementById("mensaje"),contenedor=document.getElementById("contenedorMensajes");function updateTime(){const limaTime=getLimaTime(),timeElement=document.getElementById("time"),hours=formatTimePart(limaTime.getUTCHours()-5),minutes=formatTimePart(limaTime.getUTCMinutes()),formattedTime=hours+":"+minutes;timeElement.textContent=formattedTime}function getLimaTime(){return new Date}function formatTimePart(part){return(part<10?"0":"")+part}function scrollTrigger(selector,options={}){let els=document.querySelectorAll(selector);els=Array.from(els),els.forEach(el=>{addObserver(el,options)})}function addObserver(el,options){if(!("IntersectionObserver"in window))return void(options.cb?options.cb(el):entry.target.classList.add("active"));let observer;new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){if(options.cb)options.cb(el);else{entry.target.classList.add("active");const aaa=entry.target.getAttribute("aria-expanded");aaa&&console.log({aaa:aaa})}observer.unobserve(entry.target)}})},options).observe(el)}document.addEventListener("DOMContentLoaded",()=>{updateTime(),setInterval(updateTime,6e4);const mainElement=document.querySelector("main"),images=mainElement.querySelectorAll("img");images.forEach(image=>{const anchor=document.createElement("a");anchor.href=image.src;const clonedImage=image.cloneNode(!0);anchor.appendChild(clonedImage),image.parentNode.replaceChild(anchor,image)})}),document.addEventListener("DOMContentLoaded",(function(){window.jsSlider=[];let allSliders=document.querySelectorAll(".slider-js");for(let index=0,len=allSliders.length;index<len;index++){let slider=allSliders[index],progress=slider.querySelector(".progress");function updateClasses(instance,slider){let slide=instance.details().relativeSlide,arrowLeft=slider.querySelector(".arrow-left"),arrowRight=slider.querySelector(".arrow-right");arrowRight&&(0===slide?arrowLeft.classList.add("arrow--disabled"):arrowLeft.classList.remove("arrow--disabled")),arrowLeft&&(slide===instance.details().size-1?arrowRight.classList.add("arrow--disabled"):arrowRight.classList.remove("arrow--disabled"));let dots=slider.querySelectorAll(".dot");dots&&dots.forEach((function(dot,idx){idx===slide?dot.classList.add("dot--active"):dot.classList.remove("dot--active")}))}let sliderInterval=0;function autoplay(mainSlider,run){clearInterval(sliderInterval),sliderInterval=setInterval(()=>{run&&mainSlider&&mainSlider.next()},5e3)}let extraData={created:function(instance){slider.querySelector(".arrow-left")&&slider.querySelector(".arrow-left").addEventListener("click",(function(){instance.prev(),progress&&(progress.classList.remove("active"),setTimeout(()=>{progress.classList.add("active")},50))})),slider.querySelector(".arrow-right")&&slider.querySelector(".arrow-right").addEventListener("click",(function(){instance.next(),progress&&(progress.classList.remove("active"),setTimeout(()=>{progress.classList.add("active")},50))}));let dots_wrapper=slider.querySelector(".dots");if(dots_wrapper){let slides;slider.querySelectorAll(".keen-slider__slide").forEach((function(t,idx){let dot=document.createElement("button");dot.classList.add("dot"),dots_wrapper.appendChild(dot),dot.addEventListener("click",(function(){instance.moveToSlide(idx)}))}))}updateClasses(instance,slider)},slideChanged(instance){if(updateClasses(instance,slider),slider.dataset.slider){let dataSlider=JSON.parse(slider.dataset.slider);if(dataSlider=dataSlider,dataSlider.navFor){let slide=instance.details().relativeSlide,size=instance.details().size;window.jsSlider[dataSlider.navFor]&&window.jsSlider[dataSlider.navFor].moveToSlide(slide)}}}};if(slider.dataset.slider){let dataSlider=JSON.parse(slider.dataset.slider);dataSlider=dataSlider,dataSlider={...dataSlider,...extraData},dataSlider.progress&&progress&&progress.classList.add("active");let autoPlayData={dragStart:e=>{autoplay(mainSlider,!1)},dragEnd:e=>{autoplay(mainSlider,!0)}};dataSlider.autoplay&&(dataSlider={...dataSlider,...autoPlayData});let selectSlider=slider.querySelector(".keen-slider"),mainSlider=new KeenSlider(selectSlider,dataSlider);dataSlider.autoplay&&autoplay(mainSlider,!0),dataSlider.id&&(console.log("id: ",dataSlider.id),window.jsSlider[dataSlider.id]=mainSlider)}else console.log("Please add the data-slider values")}function handleResize(){for(let index=0,len=allSliders.length;index<len;index++){let slider=allSliders[index],dataSlider=JSON.parse(slider.dataset.slider);window.innerWidth>1e3?dataSlider.slidesPerView=2.5:dataSlider.slidesPerView=1.5,window.jsSlider[dataSlider.id]&&window.jsSlider[dataSlider.id].destroy();let selectSlider=slider.querySelector(".keen-slider"),mainSlider=new KeenSlider(selectSlider,dataSlider);window.jsSlider[dataSlider.id]=mainSlider}}})),scrollTrigger(".intro-text"),scrollTrigger(".scroll-reveal",{rootMargin:"-200px"});const buttons=document.querySelectorAll("[aria-expanded]");function toggleExpand(){const button=event.target,ariaExpanded="true"===button.getAttribute("aria-expanded"),targetId=button.getAttribute("aria-controls"),targetElement=document.getElementById(targetId);ariaExpanded?(targetElement.setAttribute("hidden",""),button.setAttribute("aria-expanded","false"),button.textContent="Leer mÃ¡s"):(targetElement.removeAttribute("hidden"),button.setAttribute("aria-expanded","true"),button.textContent="Leer menos",targetElement.querySelector(".text-divided+a").focus())}buttons.forEach(button=>{button.addEventListener("click",toggleExpand)});const pushesBox=document.getElementById("pushesBox"),showMoreBtn=document.getElementById("showMoreBtn"),more=document.getElementById("more");let numberOfPushes=5;const username="araceliponce";let accessToken="";function fetchPushes(username,accessToken){let url,headers={};""!==accessToken&&(headers={Authorization:`token ${accessToken}`}),fetch(`https://api.github.com/users/${username}/events`,{headers:headers}).then(response=>response.json()).then(data=>{if(Array.isArray(data)){const pushEvents=data.filter(event=>"PushEvent"===event.type),pushes=pushEvents.map(event=>{const isPublic=event.public;return{repo:event.repo.name,message:event.payload.commits[0].message,date:event.created_at,public:isPublic}});renderPushes(pushes)}else console.error("Invalid API response format.")}).catch(error=>{console.error("Error:",error)})}function renderPushes(pushes){pushesBox.innerHTML="",pushes.slice(0,numberOfPushes).forEach(push=>{const fecha=new Date(push.date),opcionesFecha={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},fechaFormateada=fecha.toLocaleDateString("es-ES",opcionesFecha),li=document.createElement("span");li.textContent=`Repositorio: ${push.repo} - Mensaje: ${push.message} - Fecha: ${fechaFormateada}`,pushesBox.appendChild(li)})}showMoreBtn.addEventListener("click",()=>{fetchPushes(username,accessToken),more.removeAttribute("hidden"),fetchSPData(),pushesBox.scrollIntoView({behavior:"smooth",block:"start"})});let lastFetchedTimestamp=null;async function fetchSPData(){try{const query=supabase.from("posts").select("*").order("created_at",{ascending:!0});lastFetchedTimestamp&&query.gt("created_at",lastFetchedTimestamp);const{data:data,error:error}=await query;error?console.error("Error fetching posts:",error):data.forEach(item=>{const createdAt=new Date(item.created_at),day=createdAt.toLocaleString("es",{day:"numeric"}),month=createdAt.toLocaleString("es",{month:"long"}),year=createdAt.toLocaleString("es",{year:"numeric"}),time=createdAt.toLocaleString("es",{hour:"numeric",minute:"numeric",hour12:!0}),formattedDate=`el ${day} de ${month} de ${year}, a las ${time}`,messageElement=document.createElement("div");messageElement.classList.add("msg");const nameElement=document.createElement("span");nameElement.classList.add("name"),nameElement.textContent=item.nombre+", ";const dateElement=document.createElement("span");dateElement.classList.add("date"),dateElement.textContent=formattedDate;const contentElement=document.createElement("div");contentElement.classList.add("text"),contentElement.textContent=item.mensaje,messageElement.appendChild(nameElement),messageElement.appendChild(dateElement),messageElement.appendChild(contentElement),contenedor.appendChild(messageElement),(!lastFetchedTimestamp||item.created_at>lastFetchedTimestamp)&&(lastFetchedTimestamp=item.created_at)})}catch(error){console.error("Error:",error)}}form.addEventListener("submit",async e=>{e.preventDefault();const nombre=nombreInput.value,mensaje=mensajeInput.value,{data:data,error:error}=await supabase.from("posts").insert([{nombre:nombre,mensaje:mensaje}]);error||(nombreInput.value="",mensajeInput.value="",await fetchSPData())});const images=document.querySelectorAll("img");images.forEach(image=>{const button=document.createElement("button");button.classList.add("open-modal"),button.textContent="ver",button.addEventListener("click",(function(){const src=image.getAttribute("src"),modalImage=document.querySelector(".modal img");modalImage.src=src})),image.insertAdjacentElement("afterend",button)});const modal={callOpen:()=>{modal.opener=document.activeElement,openModal()},callClose:()=>{closeModal(modal.opener)},handleOverlayClick:event=>{"overlay"===event.target.className&&closeModal(modal.opener)}};function openModal(){setVisibile(!0),setFocus(),setInertBehindModal(!0)}function closeModal(opener){setVisibile(!1),setInertBehindModal(!1),opener.focus()}function attachEventListener(openButtons,closeButtons,overlay){openButtons.forEach(b=>{b.addEventListener("click",modal.callOpen)}),closeButtons.forEach(b=>{b.addEventListener("click",modal.callClose)}),overlay.addEventListener("click",modal.handleOverlayClick),window.addEventListener("keydown",clallIfEscPress)}function setVisibile(visible){const display=visible?"block":"none";document.querySelector(".overlay").style.display=display}function setFocus(){document.querySelector(".modal").focus()}function setInertBehindModal(inert){const element=document.querySelector("main");element.inert=inert,element.setAttribute("aria-hidden",inert)}function clallIfEscPress(event){"Escape"===event.key&&modal.callClose()}const openButtons=document.querySelectorAll(".open-modal"),closeButtons=document.querySelectorAll(".close-modal"),overlay=document.querySelector(".overlay");attachEventListener(openButtons,closeButtons,overlay);